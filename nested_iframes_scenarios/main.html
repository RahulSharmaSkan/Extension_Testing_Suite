<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triple Nested Cross-Origin Iframes - All Combinations</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1419 100%);
            color: #e0e0e0;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .scenario-section {
            background: linear-gradient(135deg, #1a2332 0%, #16202d 100%);
            margin-bottom: 40px;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
        }
        
        .scenario-section h2 {
            color: #00d4ff;
            margin-bottom: 20px;
            border-bottom: 2px solid #00d4ff;
            padding-bottom: 10px;
            font-size: 1.8em;
        }
        
        .iframe-container {
            position: relative;
            width: 100%;
            height: 700px;
            border: 3px solid #00d4ff;
            border-radius: 10px;
            overflow: hidden;
            background: #0f1419;
        }
        
        .iframe-container.scenario-1 {
            height: 500px;
            width: 90%;
            margin: 0 auto;
        }
        
        .iframe-container.scenario-3 {
            height: 650px;
            width: 95%;
            margin: 0 auto;
        }
        
        .iframe-container.scenario-4 {
            height: 600px;
            width: 85%;
            margin: 0 auto;
        }
        
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .info-box {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(0, 153, 255, 0.1) 100%);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }
        
        .info-box h3 {
            margin-top: 0;
            color: #00d4ff;
            font-size: 1.3em;
        }
        
        .info-box p {
            color: #b0b0b0;
        }
        
        .origin-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .origin-badge {
            background: linear-gradient(135deg, #00d4ff 0%, #0099ff 100%);
            color: #0a0e27;
            padding: 8px 16px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 0.9em;
            box-shadow: 0 2px 5px rgba(0, 212, 255, 0.3);
        }
        
        .origin-badge.cross-origin {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff5252 100%);
            color: white;
        }
        
        .origin-badge.same-origin {
            background: linear-gradient(135deg, #00d4ff 0%, #00b8d4 100%);
            color: #0a0e27;
        }
        
        .arrow {
            font-size: 1.5em;
            color: #00d4ff;
            font-weight: bold;
        }
        
        .technical-details {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid rgba(255, 193, 7, 0.4);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .technical-details h4 {
            margin-top: 0;
            color: #ffc107;
        }
        
        .technical-details ul {
            color: #b0b0b0;
        }
        
        .warning-box {
            background: rgba(255, 107, 107, 0.1);
            border: 2px solid rgba(255, 107, 107, 0.4);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .warning-box h4 {
            margin-top: 0;
            color: #ff6b6b;
        }
        
        .warning-box p {
            color: #b0b0b0;
        }
        
        .success-box {
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.4);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .success-box h4 {
            margin-top: 0;
            color: #00d4ff;
        }
        
        .success-box ul {
            color: #b0b0b0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Triple Nested Iframes - All Origin Combinations</h1>
        
        <!-- Scenario 1: Same Origin ‚Üí Cross Origin ‚Üí Cross Origin -->
        <div class="scenario-section">
            <h2>üìã Scenario 1: Same Origin ‚Üí Cross Origin ‚Üí Cross Origin</h2>
            
            <div class="info-box">
                <h3>üîÑ Origin Flow:</h3>
                <div class="origin-flow">
                    <span class="origin-badge same-origin">Main Page (Same Origin)</span>
                    <span class="arrow">‚Üí</span>
                    <span class="origin-badge cross-origin">Level 1 (Cross Origin)</span>
                    <span class="arrow">‚Üí</span>
                    <span class="origin-badge cross-origin">Level 2 (Cross Origin)</span>
                </div>
                <p>This demonstrates a same-origin page embedding a cross-origin iframe, which then embeds another cross-origin iframe.</p>
            </div>
            
            <div class="iframe-container scenario-1">
                <iframe 
                    src="level1-same-to-cross.html"
                    title="Same Origin Level 1"
                    sandbox="allow-same-origin allow-scripts">
                    <p>Your browser does not support iframes.</p>
                </iframe>
            </div>
            
            <div class="technical-details">
                <h4>üîß Technical Implementation:</h4>
                <ul>
                    <li>Main page loads a same-origin HTML file</li>
                    <li>That file contains a cross-origin iframe (data URL)</li>
                    <li>The cross-origin iframe contains another cross-origin iframe (httpbin.org)</li>
                    <li>Each level has different security contexts</li>
                </ul>
            </div>
        </div>
        
        <!-- Scenario 3: Triple Cross-Origin Nesting -->
        <div class="scenario-section">
            <h2>üìã Scenario 3: Triple Cross-Origin Nesting</h2>
            
            <div class="info-box">
                <h3>üîÑ Origin Flow:</h3>
                <div class="origin-flow">
                    <span class="origin-badge cross-origin">Level 1 (Cross Origin)</span>
                    <span class="arrow">‚Üí</span>
                    <span class="origin-badge cross-origin">Level 2 (Cross Origin)</span>
                    <span class="arrow">‚Üí</span>
                    <span class="origin-badge cross-origin">Level 3 (Cross Origin)</span>
                </div>
                <p>This demonstrates three levels of cross-origin iframe nesting, each from different domains.</p>
            </div>
            
            <div class="iframe-container scenario-3">
                <iframe 
                    src="data:text/html;charset=utf-8,%3C%21DOCTYPE%20html%3E%0A%3Chtml%20lang%3D%22en%22%3E%0A%3Chead%3E%0A%20%20%20%20%3Cmeta%20charset%3D%22UTF-8%22%3E%0A%20%20%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1.0%22%3E%0A%20%20%20%20%3Ctitle%3ETriple%20Cross-Origin%20Level%201%3C%2Ftitle%3E%0A%20%20%20%20%3Cstyle%3E%0A%20%20%20%20%20%20%20%20body%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20font-family%3A%20Arial%2C%20sans-serif%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin%3A%2010px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20background%3A%20linear-gradient%28135deg%2C%20%23667eea%200%25%2C%20%23764ba2%20100%25%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20color%3A%20white%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20min-height%3A%20calc%28100vh%20-%2020px%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20.header%20%7B%20text-align%3A%20center%3B%20margin-bottom%3A%2015px%3B%20%7D%0A%20%20%20%20%20%20%20%20.level-container%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20background-color%3A%20rgba%28255%2C%20255%2C%20255%2C%200.1%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20border-radius%3A%208px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%2010px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20border%3A%202px%20solid%20rgba%28255%2C%20255%2C%20255%2C%200.3%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20.nested-iframe%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20height%3A%20400px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20border%3A%203px%20solid%20%23ff6b6b%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20border-radius%3A%205px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%3C%2Fstyle%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%20%20%20%20%3Cdiv%20class%3D%22header%22%3E%0A%20%20%20%20%20%20%20%20%3Ch1%3E%F0%9F%9A%80%20Cross-Origin%20Level%201%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%3Cp%3EFirst%20level%20of%20triple%20cross-origin%20nesting%3C%2Fp%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%0A%20%20%20%20%3Cdiv%20class%3D%22level-container%22%3E%0A%20%20%20%20%20%20%20%20%3Ch2%3E%F0%9F%94%97%20Loading%20Level%202%3C%2Fh2%3E%0A%20%20%20%20%20%20%20%20%3Ciframe%20%0A%20%20%20%20%20%20%20%20%20%20%20%20class%3D%22nested-iframe%22%0A%20%20%20%20%20%20%20%20%20%20%20%20src%3D%22data%3Atext%2Fhtml%3Bcharset%3Dutf-8%2C%253C%2521DOCTYPE%2520html%253E%250A%253Chtml%253E%250A%253Chead%253E%250A%2520%2520%2520%2520%253Ctitle%253ELevel%25202%253C%252Ftitle%253E%250A%2520%2520%2520%2520%253Cstyle%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520body%2520%257B%2520background%253A%2520linear-gradient%2528135deg%252C%2520%2523ff6b6b%25200%2525%252C%2520%2523ee5a24%2520100%2525%2529%253B%2520color%253A%2520white%253B%2520padding%253A%252010px%253B%2520font-family%253A%2520Arial%253B%2520%257D%250A%2520%2520%2520%2520%2520%2520%2520%2520.container%2520%257B%2520text-align%253A%2520center%253B%2520%257D%250A%2520%2520%2520%2520%2520%2520%2520%2520.final-iframe%2520%257B%2520width%253A%2520100%2525%253B%2520height%253A%2520250px%253B%2520border%253A%25203px%2520solid%2520%252354a3ff%253B%2520border-radius%253A%25205px%253B%2520%257D%250A%2520%2520%2520%2520%253C%252Fstyle%253E%250A%253C%252Fhead%253E%250A%253Cbody%253E%250A%2520%2520%2520%2520%253Cdiv%2520class%253D%2522container%2522%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%253Ch1%253E%25F0%259F%2594%25A5%2520Cross-Origin%2520Level%25202%253C%252Fh1%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%253Cp%253ESecond%2520level%2520-%2520loading%2520final%2520cross-origin%2520iframe%253A%253C%252Fp%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%253Ciframe%2520class%253D%2522final-iframe%2522%2520src%253D%2522https%253A%252F%252Fhttpbin.org%252Fhtml%2522%2520title%253D%2522Level%25203%2520Final%2522%253E%253C%252Fiframe%253E%250A%2520%2520%2520%2520%253C%252Fdiv%253E%250A%2520%2520%2520%2520%253Cscript%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520console.log%2528%2527Cross-Origin%2520Level%25202%2520loaded%2527%2529%253B%250A%2520%2520%2520%2520%253C%252Fscript%253E%250A%253C%252Fbody%253E%250A%253C%252Fhtml%253E%22%0A%20%20%20%20%20%20%20%20%20%20%20%20title%3D%22Cross-Origin%20Level%202%22%0A%20%20%20%20%20%20%20%20%20%20%20%20sandbox%3D%22allow-same-origin%20allow-scripts%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%3ELevel%202%20Fallback%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3C%2Fiframe%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%3E%0A%20%20%20%20%20%20%20%20console.log%28%27Triple%20Cross-Origin%20Level%201%20loaded%27%29%3B%0A%20%20%20%20%3C%2Fscript%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E"
                    title="Triple Cross-Origin Level 1"
                    sandbox="allow-same-origin allow-scripts">
                    <p>Your browser does not support iframes.</p>
                </iframe>
            </div>
            
            <div class="success-box">
                <h4>‚úÖ This Works Because:</h4>
                <ul>
                    <li>Each level is a separate cross-origin context</li>
                    <li>Data URLs create isolated security contexts</li>
                    <li>Final level loads real external content (httpbin.org)</li>
                    <li>Each iframe is sandboxed for security</li>
                </ul>
            </div>
        </div>
        
        <!-- Scenario 4: Triple Same-Origin Nesting -->
        <div class="scenario-section">
            <h2>üìã Scenario 4: Triple Same-Origin Nesting</h2>
            
            <div class="info-box">
                <h3>üîÑ Origin Flow:</h3>
                <div class="origin-flow">
                    <span class="origin-badge same-origin">Level 1 (Same Origin)</span>
                    <span class="arrow">‚Üí</span>
                    <span class="origin-badge same-origin">Level 2 (Same Origin)</span>
                    <span class="arrow">‚Üí</span>
                    <span class="origin-badge same-origin">Level 3 (Same Origin)</span>
                </div>
                <p>This demonstrates three levels of same-origin iframe nesting, all from the same domain.</p>
            </div>
            
            <div class="iframe-container scenario-4">
                <iframe 
                    src="level1-same-origin.html"
                    title="Same Origin Level 1"
                    sandbox="allow-same-origin allow-scripts">
                    <p>Your browser does not support iframes.</p>
                </iframe>
            </div>
            
            <div class="success-box">
                <h4>‚úÖ Same-Origin Benefits:</h4>
                <ul>
                    <li>All frames can communicate freely</li>
                    <li>No cross-origin security restrictions</li>
                    <li>Parent can access child frame content</li>
                    <li>Shared cookies and local storage</li>
                </ul>
            </div>
        </div>
        
        <!-- Security Information Section -->
        <div class="scenario-section">
            <h2>üõ°Ô∏è Security & Technical Summary</h2>
            
            <div class="info-box">
                <h3>üîç Key Observations:</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                    <div>
                        <h4 style="color: #00d4ff;">‚úÖ Same-Origin Iframes:</h4>
                        <ul style="color: #b0b0b0;">
                            <li>Full DOM access between frames</li>
                            <li>Shared security context</li>
                            <li>Can reference local files directly</li>
                            <li>No postMessage needed</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #ff6b6b;">‚ùå Cross-Origin Iframes:</h4>
                        <ul style="color: #b0b0b0;">
                            <li>Isolated security contexts</li>
                            <li>No direct DOM access</li>
                            <li>Must use postMessage API</li>
                            <li>Subject to CSP and X-Frame-Options</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="technical-details">
                <h4>üîß Implementation Notes:</h4>
                <ul>
                    <li><strong>Data URLs:</strong> Used to simulate cross-origin content reliably</li>
                    <li><strong>Sandbox Attributes:</strong> Control iframe capabilities and security</li>
                    <li><strong>Console Logging:</strong> Demonstrates access restrictions in developer tools</li>
                    <li><strong>Fallback Content:</strong> Provides accessibility for unsupported browsers</li>
                    <li><strong>Responsive Design:</strong> Adapts to different screen sizes</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
      
        
        // Demonstrate postMessage communication
        
    </script>
</body>
</html>
